<!DOCTYPE html>
<html>
    <head>
        <title><%= "#{@search_phrase} Search - Anime Tracker" %></title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/css/uikit.css">
        <link rel="stylesheet" href="/css/partials/anime_title_search.css">
        <script type="text/javascript" src="/js/jquery-3.1.1.js"></script>
        <script type="text/javascript" src="/js/uikit.js"></script>
        <script type="text/javascript" src="/js/bindings.js" defer></script>
        <style>
            * {
                box-sizing: border-box;
                outline: thin solid orange;
            }
            
            .title-search-wrapper {
                padding-right: 8px;   
            }
            
            body > .uk-container {
                padding: 0;
                max-width: 1200px;
            }
            
            @media (orientation: portrait) {
                body > .uk-container {
                    max-width: 100%;
                }    
            }
            
            .content {
                min-height: 700px;    
            }
            
            .uk-grid {
                margin-left: 0;
            }
            
            .uk-grid > * {
                padding-left: 0;    
            }
            
            .result-wrapper {
                margin-left: -8px;    
            }
            
            .anime-item {
                margin-bottom: 12px;
                text-align: center;
                position: relative;
                width: 33.3%;
                padding: 8px;
            }
            
            @media (orientation: portrait) and (max-width: 480px) {
                .anime-item {
                    width: 100%;
                }
            }
            
            @media (orientation: portrait), (orientation: landscape) {
                .anime-poster {
                    height: 270px;
                }
            }
            
            @media (orientation: portrait) and (max-width: 480px) {
                .anime-poster {
                    height: 400px;
                }
            }
            
            @media (min-width: 768px) and (orientation: landscape) {
                .anime-poster {
                    height: 290px;
                }
            }
            
            @media (min-width: 968px) and (orientation: landscape) {
                .anime-poster {
                    height: 388px;
                }
            }
            
            .anime-title {
                font-size: 1em;
                font-family: sans-serif;
                margin-top: 12px;
                font-weight: 700;
            }
            
            .anime-genres {
                color: grey;
                padding: 0 4px;
                position: absolute;
                top: 0;
                left: 8%;
                background-color: #f4f4f4;
                max-width: 80%;
                text-align: left;
                display: none;
            }
            
            .title-search-wrapper {
                text-align: center;
            }
            
            section.uk-grid {
                padding-top: 20px;
                background-color: #F4F4F4;    
            }
            
            form {
                background-color: #FFF;
            }
            
            aside ul {
                margin: 0;
                padding: 0;
            }
            
            aside li {
                list-style: none;
            }
            
            @media (min-width: 480px) {
                .anime-item {
                    padding: 0 8px;
                }
                
                .title-search-wrapper {
                    text-align: right;
                }
            }
            
            @media (min-width: 768px) {
                section .wrapper {
                    display: inline-block;
                }
                
                aside {
                    width: 30%;
                    display: inline-block;
                    margin-left: -4px;
                    vertical-align: top;
                }
            }
            
        </style>
    </head>
    <body id="body">
        <div class="uk-container uk-container-center">
            <%= @header %>
            <%= @title_search_partial %>
            <section class="uk-grid uk-width-1-1 content">
                <div class="uk-width-small-4-5 uk-container-center">
                    <% if Array === @search_results %>
                        <div class="wrapper uk-width-1-1">
                            <div class="result-wrapper uk-grid">
                            <% @search_results.each do |result| %>
                                <figure class="anime-item">
                                    <a href=<%= '/show/' + "#{result['id']}" %>>
                                    <img src=<%= "#{result['image_url_lge']}" %> 
                                         width="300" height="300" class="anime-poster">
                                    <figcaption>
                                        <h2 class="anime-title"><%= result['title_english'] %></h2>
                                        <p class="anime-genres">
                                            <%= result['genres'].join(', ') %>
                                        </p>
                                    </figcaption>
                                    </a>
                                </figure>
                            <% end %>
                            </div>
                        </div>
                    <% else %>
                        <h2>Sorry, 0 results were found</h2>
                    <% end %>
                </div>
            </section>
            <%= @footer %>
        </div>
    </body>
</html>